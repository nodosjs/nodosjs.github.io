<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.2">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Nodosjs Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Nodosjs Blog Atom Feed"><title data-react-helmet="true">Routing | Nodosjs</title><meta data-react-helmet="true" property="og:url" content="https://nodosjs.github.io/docs/routing"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Routing | Nodosjs"><meta data-react-helmet="true" name="description" content="This guide covers the user-facing features of Nodos routing."><meta data-react-helmet="true" property="og:description" content="This guide covers the user-facing features of Nodos routing."><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://nodosjs.github.io/docs/routing"><link data-react-helmet="true" rel="alternate" href="https://nodosjs.github.io/docs/routing" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://nodosjs.github.io/docs/routing" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.6d2e4a02.css">
<link rel="preload" href="/assets/js/runtime~main.93853729.js" as="script">
<link rel="preload" href="/assets/js/main.8662b446.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Nodosjs</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/nodosjs/nodos" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Nodosjs</b></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/blog">Blog</a></li><li class="menu__list-item"><a href="https://github.com/nodosjs/nodos" target="_blank" rel="noopener noreferrer" class="menu__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu menu--responsive thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA" aria-label="Sidebar navigation"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Nodosjs Tutorial</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/">Getting Started</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/step-by-step">Step By Step Guide</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Components</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/models">models</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/routing">Routing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/controllers">controllers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/forms">forms</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/templates">templates</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tests">tests</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/configuring">configuring</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/debugging">debugging</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/frontend">frontend</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/jobs">jobs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/mailer">mailer</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/storage">storage</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/security">security</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="markdown"><header><h1 class="h1Heading_27L5">Routing</h1></header><p>This guide covers the user-facing features of Nodos routing.</p><p>After reading this guide, you will know:</p><ul><li><p>[âœ“] How to interpret the code in config/routes.yml.</p></li><li><p>[âœ“] How to construct your own routes</p></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="the-purpose-of-the-nodos-router"></a>The Purpose of the Nodos Router<a class="hash-link" href="#the-purpose-of-the-nodos-router" title="Direct link to heading">#</a></h2><p>The users of your website or web application can visit different URL&#x27;s like <code>/</code>, <code>/about</code> or <code>/user/1</code>. To make these URLs work, you will have to define them as routes.</p><p>Routers are the main hubs of Nodos applications. They match HTTP requests and dispatch them to a controller&#x27;s action, and define a series of pipeline transformations scoped to a set of routes.</p><p>Routes are definedinside the <code>config/routes.yml</code>.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><pre tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">- app/</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     config/</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       routes.yml</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="routes-file"></a>Routes file<a class="hash-link" href="#routes-file" title="Direct link to heading">#</a></h2><p>The routes for your application or engine live in the file <code>config/routes.yml</code> and typically looks like this:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><pre tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">pipelines:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  browser:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    - &#x27;@nodosjs/view-extension/fetchFlash&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    - &#x27;@nodosjs/view-extension/protectFromForgery&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">scopes:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  - name: /</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    pipeline: browser</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    root: true</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    routes:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - resources: users</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Both the router and controller module names same.</p><p>The <code>pipeline: browser</code> line will get a full treatment in the Pipeline section of this guide.</p><p>For now, you only need to know that pipelines allow a set of plugs to be applied to different sets of routes.</p><p>Inside block, we have our first actual routes <code>/users</code>.</p><p>When your Nodos application receives an incoming request for: <code>GET /users/1</code> it asks the router to match it to a controller action.</p><p>If the first matching route is: <code>get &#x27;/users/:id&#x27;</code> the request is dispatched to the users controller&#x27;s index action with { id: &#x27;1&#x27; } in params.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="resource-routing-on-the-web-the-nodos-default"></a>Resource Routing on the Web: the Nodos Default<a class="hash-link" href="#resource-routing-on-the-web-the-nodos-default" title="Direct link to heading">#</a></h2><p>Resource routing allows you to quickly declare all of the common routes for a given resourceful controller.</p><p>A single call to resources can declare all of the necessary routes for your index, show, new, edit, create, update, and destroy actions.</p><p>Browsers request pages from Nodos by making a request for a URL using a specific HTTP method, such as GET, POST, PATCH, PUT and DELETE.</p><p>Each method is a request to perform an operation on the resource. A resource route maps a number of related requests to actions in a single controller.</p><p>When your Nodos application receives an incoming request for:</p><p><code>DELETE /users/1</code></p><p>it asks the router to map it to a controller action. If the first matching route is:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><pre tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">    routes:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - resources: users</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Nodos would dispatch that request to the destroy action on the users controller with { id: &#x27;1&#x27; } in params.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="crud-verbs-and-actions"></a>CRUD, Verbs, and Actions<a class="hash-link" href="#crud-verbs-and-actions" title="Direct link to heading">#</a></h2><p>In Nodos, a resourceful route provides a mapping between HTTP verbs and URLs to controller actions.</p><p>By convention, each action also maps to a specific CRUD operation in a database.</p><p>A single entry in the routing file, such as:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><pre tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">    routes:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - resources: users</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>creates eight  different routes in your application, all mapping to the Users controller.</p><p>Running <code>npx nodos routes</code> now shows that we have all the routes.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><pre tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Name             Verb   URI Pattern                       Pipeline Controller#Action</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">users            GET    /users                            browser  users#index</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">buildUser        GET    /users/build                      browser  users#build</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">users            POST   /users                            browser  users#create</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">user             GET    /users/:id                        browser  users#show</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">editUser         GET    /users/:id/edit                   browser  users#edit</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">user             PATCH  /users/:id                        browser  users#update</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">user             PUT    /users/:id                        browser  users#update</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">user             DELETE /users/:id                        browser  users#destroy</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Because the router uses the HTTP verb and URL to match inbound requests, four URLs map to eight different actions.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="nested-resources"></a>Nested Resources<a class="hash-link" href="#nested-resources" title="Direct link to heading">#</a></h2><p>It is also possible to nest resources in a Nodos router.</p><p>Let&#x27;s say we also have a posts resource which has a many-to-one relationship with comments. Let&#x27;s add a new resource.</p><p>That is to say, we have many posts, and an individual comment belongs to only one post.</p><p>We can represent that by adding a nested route in config/router.yml like this:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><pre tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">pipelines:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  browser:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    - &#x27;@nodosjs/view-extension/fetchFlash&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    - &#x27;@nodosjs/view-extension/protectFromForgery&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  api:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    - example/setLocale</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    - example/setLocale</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">scopes:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  - name: api</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    pipeline: api</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    routes:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - resources: users</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  - name: /</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    pipeline: browser</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    root: true</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    routes:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - resources: users</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - resources:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          name: posts</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          routes:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            - resources: comments</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>When we run <code>npx nodos routes</code> now, in addition to the routes we saw for users above, we get the following set of routes:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><pre tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Name             Verb   URI Pattern                       Pipeline Controller#Action</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">users            GET    /users                            browser  users#index</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">buildUser        GET    /users/build                      browser  users#build</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">users            POST   /users                            browser  users#create</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">user             GET    /users/:id                        browser  users#show</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">editUser         GET    /users/:id/edit                   browser  users#edit</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">user             PATCH  /users/:id                        browser  users#update</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">user             PUT    /users/:id                        browser  users#update</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">user             DELETE /users/:id                        browser  users#destroy</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">posts            GET    /posts                            browser  posts#index</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">buildPost        GET    /posts/build                      browser  posts#build</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">posts            POST   /posts                            browser  posts#create</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">post             GET    /posts/:id                        browser  posts#show</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">editPost         GET    /posts/:id/edit                   browser  posts#edit</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">post             PATCH  /posts/:id                        browser  posts#update</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">post             PUT    /posts/:id                        browser  posts#update</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">post             DELETE /posts/:id                        browser  posts#destroy</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">postComments     GET    /posts/:post_id/comments          browser  posts/comments#index</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">buildPostComment GET    /posts/:post_id/comments/build    browser  posts/comments#build</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">postComments     POST   /posts/:post_id/comments          browser  posts/comments#create</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">postComment      GET    /posts/:post_id/comments/:id      browser  posts/comments#show</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">editPostComment  GET    /posts/:post_id/comments/:id/edit browser  posts/comments#edit</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">postComment      PATCH  /posts/:post_id/comments/:id      browser  posts/comments#update</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">postComment      PUT    /posts/:post_id/comments/:id      browser  posts/comments#update</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">postComment      DELETE /posts/:post_id/comments/:id      browser  posts/comments#destroy</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>We see that each of these routes scopes the posts to a comments ID.</p><p>For the first one, we will invoke the controller index action, but we will pass in a <code>post_id</code>.</p><p>This implies that we would display all the comments for that individual posts only.</p><p>The same scoping applies for all these routes.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="pipelines"></a>Pipelines<a class="hash-link" href="#pipelines" title="Direct link to heading">#</a></h2><p>We have come quite a long way in this guide without talking about one of the first lines we saw in the router. It&#x27;s time to fix that.</p><p>Pipelines are a series of plugs that can be attached to specific scopes.</p><p>Routes are defined inside scopes and scopes may pipe through multiple pipelines.</p><p>Once a route matches, Nodos invokes all plugs defined in all pipelines associated to that route.</p><p>For example, accessing &quot;/&quot; will pipe through the :browser pipeline, consequently invoking all of its plugs.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><pre tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">pipelines:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  browser:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    - &#x27;@nodosjs/view-extension/fetchFlash&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    - &#x27;@nodosjs/view-extension/protectFromForgery&#x27;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Nodos defines two pipelines by default, <code>:browser</code> and <code>:api</code>, which can be used for a number of common tasks.</p><p>In turn we can customize them as well as create new pipelines to meet our needs.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="the-browser-and-api-pipelines"></a>The :browser and :api Pipelines<a class="hash-link" href="#the-browser-and-api-pipelines" title="Direct link to heading">#</a></h2><p>As their names suggest, the <code>:browser</code> pipeline prepares for routes which render requests for a browser.</p><p>The <code>:api</code> pipeline prepares for routes which produce data for an api.</p><p>The <code>:browser</code> pipeline has 2 plugs:</p><p><code>&#x27;@nodosjs/view-extension/fetchFlash&#x27;</code></p><p><code>&#x27;@nodosjs/view-extension/protectFromForgery&#x27;</code></p><p>The router invokes a pipeline on a route defined within a scope.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="creating-new-pipelines"></a>Creating New Pipelines<a class="hash-link" href="#creating-new-pipelines" title="Direct link to heading">#</a></h2><p>Nodos allows us to create our own custom pipelines anywhere in the router. </p><p>To do so, we create a new middleware and add to routes.yml</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><pre tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">- app/</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     middlewares/</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       yourMiddlewares.js</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><pre tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">pipelines:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  browser:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    - &#x27;@nodosjs/view-extension/fetchFlash&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    - &#x27;@nodosjs/view-extension/protectFromForgery&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    - yourMiddlewares</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  api:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    - example/setLocale</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    - example/setLocale</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">scopes:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  - name: api</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    pipeline: api</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    routes:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - resources: users</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  - name: /</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    pipeline: browser</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    root: true</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    routes:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - resources: users</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - resources:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          name: posts</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          routes:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            - resources: comments</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Right now when the server accepts a request, the request will always first pass through the plugs in our Endpoint, after which it will attempt to match on the path and HTTP verb.</p><p>Let&#x27;s say that the request matches our first route: a GET to <code>/</code> .</p><p>The router will first pipe that request through the <code>:browser</code> pipeline before it dispatches the request to the contoller index action.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><a href="https://github.com/nodosjs/nodos/tree/master/site/docs/routing.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_3DPF"></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/models"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« models</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/controllers"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">controllers Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#the-purpose-of-the-nodos-router" class="table-of-contents__link">The Purpose of the Nodos Router</a></li><li><a href="#routes-file" class="table-of-contents__link">Routes file</a></li><li><a href="#resource-routing-on-the-web-the-nodos-default" class="table-of-contents__link">Resource Routing on the Web: the Nodos Default</a></li><li><a href="#crud-verbs-and-actions" class="table-of-contents__link">CRUD, Verbs, and Actions</a></li><li><a href="#nested-resources" class="table-of-contents__link">Nested Resources</a></li><li><a href="#pipelines" class="table-of-contents__link">Pipelines</a></li><li><a href="#the-browser-and-api-pipelines" class="table-of-contents__link">The :browser and :api Pipelines</a></li><li><a href="#creating-new-pipelines" class="table-of-contents__link">Creating New Pipelines</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/">Getting Started</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/nodosjs" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li><li class="footer__item"><a href="https://discordapp.com/invite/nodojs" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="https://twitter.com/nodosjs" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/nodosjs/nodos" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.93853729.js"></script>
<script src="/assets/js/main.8662b446.js"></script>
</body>
</html>